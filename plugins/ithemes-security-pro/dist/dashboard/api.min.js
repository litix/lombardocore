(globalThis.itsecWebpackJsonP=globalThis.itsecWebpackJsonP||[]).push([[3767],{13722:(e,r,a)=>{"use strict";a.r(r),a.d(r,{AdminBarFill:()=>Ma,AdminBarSlot:()=>Ja,BelowToolbarFill:()=>Ka,BelowToolbarSlot:()=>Xa,EditCardsFill:()=>et,EditCardsSlot:()=>rt});var t={};a.r(t),a.d(t,{FAILED_ADD_DASHBOARD:()=>de,FAILED_DELETE_DASHBOARD:()=>ue,FAILED_SAVE_DASHBOARD:()=>ne,FINISH_ADD_DASHBOARD:()=>te,FINISH_DELETE_DASHBOARD:()=>ce,FINISH_SAVE_DASHBOARD:()=>ie,RECEIVE_DASHBOARD:()=>X,RECEIVE_DASHBOARD_COLLECTION_HEADERS:()=>le,RECEIVE_DASHBOARD_LAYOUT:()=>ee,RECEIVE_DASHBOARD_QUERY:()=>K,SAVING_DASHBOARD_LAYOUT:()=>re,START_ADD_DASHBOARD:()=>ae,START_DELETE_DASHBOARD:()=>oe,START_SAVE_DASHBOARD:()=>se,addDashboard:()=>j,deleteDashboard:()=>J,failedAddDashboard:()=>P,failedDeleteDashboard:()=>G,failedSaveDashboard:()=>Q,finishAddDashboard:()=>N,finishDeleteDashboard:()=>z,finishSaveDashboard:()=>k,receiveDashboard:()=>x,receiveDashboardCollectionHeaders:()=>U,receiveDashboardLayout:()=>L,receiveDashboardQuery:()=>B,saveDashboard:()=>Y,saveDashboardLayout:()=>M,saveDashboardLayoutFromGrid:()=>Z,savingDashboardLayout:()=>F,startAddDashboard:()=>V,startDeleteDashboard:()=>$,startSaveDashboard:()=>q});var d={};a.r(d),a.d(d,{canCreateDashboards:()=>pe,canEditDashboard:()=>Ee,getAvailableDashboards:()=>fe,getDashboard:()=>_e,getDashboardAddableCardLDOs:()=>Ce,getDashboardForEdit:()=>Re,getDashboardLayout:()=>Te,getDashboardLayoutForGrid:()=>we,getDashboardsQueryResult:()=>ge,isAddingDashboard:()=>Be,isCanCreateDashboardsLoaded:()=>Oe,isCardAtDashboardLimit:()=>Se,isDeletingDashboard:()=>Le,isLayoutLoaded:()=>me,isRequestingDashboardLayout:()=>ve,isRequestingDashboards:()=>Ie,isSavingDashboard:()=>xe,isSavingDashboardLayout:()=>He});var s={};a.r(s),a.d(s,{canCreateDashboards:()=>Ve,getAvailableDashboards:()=>Fe,getDashboard:()=>Ne,getDashboardForEdit:()=>Pe,getDashboardLayout:()=>Ue});var i={};a.r(i),a.d(i,{RECEIVE_AVAILABLE_CARDS:()=>ke,receiveAvailableCards:()=>qe});var n={};a.r(n),a.d(n,{FAILED_ADD_DASHBOARD_CARD:()=>Sr,FAILED_DASHBOARD_CARD_RPC:()=>mr,FAILED_QUERY_DASHBOARD_CARD:()=>Vr,FAILED_REFRESH_DASHBOARD_CARD:()=>xr,FAILED_REFRESH_DASHBOARD_CARDS:()=>Tr,FINISH_ADD_DASHBOARD_CARD:()=>Cr,FINISH_DASHBOARD_CARD_RPC:()=>vr,FINISH_QUERY_DASHBOARD_CARD:()=>Fr,FINISH_REFRESH_DASHBOARD_CARD:()=>Br,FINISH_REFRESH_DASHBOARD_CARDS:()=>Hr,RECEIVE_DASHBOARD_CARD:()=>fr,RECEIVE_DASHBOARD_CARDS:()=>Ar,RECEIVE_DASHBOARD_CARD_DATA:()=>_r,RECEIVE_DASHBOARD_CARD_QUERY_ARGS:()=>gr,REMOVE_DASHBOARD_CARD:()=>Rr,START_ADD_DASHBOARD_CARD:()=>pr,START_DASHBOARD_CARD_RPC:()=>Ir,START_QUERY_DASHBOARD_CARD:()=>Lr,START_REFRESH_DASHBOARD_CARD:()=>wr,START_REFRESH_DASHBOARD_CARDS:()=>Or,START_REMOVE_DASHBOARD_CARD:()=>Er,addDashboardCard:()=>cr,callDashboardCardRpc:()=>yr,dashboardCardRemoved:()=>je,failedAddDashboardCard:()=>Me,failedDashboardCardRpc:()=>Xe,failedQueryDashboardCard:()=>or,failedRefreshDashboardCard:()=>sr,failedRefreshDashboardCards:()=>ar,finishAddDashboardCard:()=>Ze,finishDashboardCardRpc:()=>Ke,finishQueryDashboardCard:()=>nr,finishRefreshDashboardCard:()=>dr,finishRefreshDashboardCards:()=>rr,queryDashboardCard:()=>Dr,receiveDashboardCard:()=>$e,receiveDashboardCardData:()=>Ge,receiveDashboardCardQueryArgs:()=>ze,receiveDashboardCards:()=>Qe,refreshDashboardCard:()=>br,refreshDashboardCards:()=>hr,removeDashboardCard:()=>lr,saveDashboardCard:()=>ur,startAddDashboardCard:()=>We,startDashboardCardRemove:()=>Ye,startDashboardCardRpc:()=>Je,startQueryDashboardCard:()=>ir,startRefreshDashboardCard:()=>tr,startRefreshDashboardCards:()=>er});var o={};a.r(o),a.d(o,{getAvailableCard:()=>Pr,getAvailableCardBySelf:()=>Ur,getAvailableCards:()=>Nr});var c={};a.r(c),a.d(c,{getAvailableCard:()=>kr,getAvailableCardBySelf:()=>Qr,getAvailableCards:()=>qr});var u={};a.r(u),a.d(u,{areCardsLoaded:()=>Xr,canEditCard:()=>Mr,getCallingDashboardCardRpcs:()=>da,getDashboardCard:()=>Gr,getDashboardCardConfig:()=>Wr,getDashboardCardQueryArgs:()=>Yr,getDashboardCardSettings:()=>jr,getDashboardCards:()=>zr,getDashboardCardsByType:()=>Zr,isAddingCard:()=>ra,isCallingDashboardCardRpc:()=>aa,isQueryingDashboardCard:()=>sa,isRefreshingDashboardCards:()=>Kr,isRemovingCard:()=>ea,isRequestingCards:()=>Jr});var l={};a.r(l),a.d(l,{getDashboardCardConfig:()=>na,getDashboardCards:()=>ia});var h={};a.r(h),a.d(h,{CLOSE_EDIT_CARDS:()=>Sa,NAVIGATE:()=>_a,NAVIGATE_BACK:()=>Ra,OPEN_EDIT_CARDS:()=>Ca,RECEIVE_STATIC_STATS:()=>Ia,RECEIVE_SUGGESTED_SHARE_USERS:()=>Ea,RECEIVE_USER:()=>pa,REGISTER_CARD:()=>ma,USING_TOUCH:()=>va,closeEditCards:()=>ba,openEditCards:()=>ha,receiveStaticStats:()=>Aa,receiveSuggestedShareUsers:()=>Da,receiveUser:()=>ya,registerCard:()=>ga,usingTouch:()=>fa,viewCreateDashboard:()=>ca,viewDashboard:()=>oa,viewHelp:()=>ua,viewPrevious:()=>la});var b={};a.r(b),a.d(b,{getCurrentPage:()=>Ha,getCurrentPageAttr:()=>Ta,getRegisteredCard:()=>Na,getStaticStats:()=>Fa,getSuggestedShareUsers:()=>Ba,getUser:()=>xa,getViewingDashboardId:()=>wa,isEditingCards:()=>La,isUsingTouch:()=>Va});var D={};a.r(D),a.d(D,{getStaticStats:()=>Qa,getSuggestedShareUsers:()=>qa,getUser:()=>ka});var y={};a.r(y),a.d(y,{RECEIVE_PRIMARY_DASHBOARD:()=>Ga,receivePrimaryDashboard:()=>$a,setPrimaryDashboard:()=>za});var A={};a.r(A),a.d(A,{getPrimaryDashboard:()=>Ya});var f={};a.r(f),a.d(f,{getPrimaryDashboard:()=>Wa});var g=a(87462),_=a(6293),R=a(92819),E=a(64893),p=a(48015),C=a(87514),S=a.n(C),I=a(31511);function v(e){return{type:"API_FETCH",request:e}}function m(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"info",r=arguments.length>1?arguments[1]:void 0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return{type:"CREATE_NOTICE",status:e,content:r,options:{context:"ithemes-security",...a}}}const O={API_FETCH(e){let{request:r}=e;return S()(r).catch(I.xJ)},SELECT(e){let{selectorName:r,args:a}=e;return(0,p.select)("ithemes-security/dashboard")[r](...a)},CREATE_NOTICE(e){let{status:r,content:a,options:t}=e;t.autoDismiss&&(t.id=t.id||(0,R.uniqueId)("itsec-auto-dismiss-"),setTimeout((()=>(0,p.dispatch)("core/notices").removeNotice(t.id,t.context)),t.autoDismiss)),(0,p.dispatch)("core/notices").createNotice(r,a,t)}};var H=a(73470),T=a(95122),w=a(65760);function B(e,r){return{type:K,queryId:e,dashboards:r}}function x(e){return{type:X,dashboard:e}}function L(e,r){return{type:ee,dashboardId:e,layout:r}}function F(e,r){return{type:re,dashboardId:e,layout:r}}function V(e,r){return{type:ae,dashboard:e,context:r}}function N(e,r,a){return{type:te,dashboard:e,created:r,context:a}}function P(e,r,a){return{type:de,dashboard:e,context:r,error:a}}function U(e){return{type:le,headers:e}}function q(e){return{type:se,dashboardId:e}}function k(e){return{type:ie,dashboardId:e}}function Q(e,r){return{type:ne,dashboardId:e,error:r}}function $(e){return{type:oe,dashboardId:e}}function z(e){return{type:ce,dashboardId:e}}function G(e,r){return{type:ue,dashboardId:e,error:r}}function*j(e,r){let a;yield V(e,r);try{a=yield W(e)}catch(a){return yield P(e,r,a),void(yield m("error",(0,T.sprintf)((0,T.__)("Error when creating dashboard: %s","it-l10n-ithemes-security-pro"),a.message)))}yield x(a),yield N(e,a,r),yield m("success",(0,T.__)("Dashboard Created","it-l10n-ithemes-security-pro"),{autoDismiss:1e4})}function*Y(e){let r;yield q(e.id);try{r=yield W(e)}catch(r){return yield Q(e.id,r),yield m("error",(0,T.sprintf)((0,T.__)("Error when saving dashboard: %s","it-l10n-ithemes-security-pro"),r.message)),r}return yield x(r),yield k(e.id),r}function*W(e){return yield v({path:(0,H.addQueryArgs)("/ithemes-security/v1/dashboards"+(e.id?"/"+e.id:""),{_embed:1}),method:e.id?"PUT":"POST",data:e})}function*Z(e,r){const a=(0,w.Ai)(e,r);if(yield L(e,a),(0,p.select)("ithemes-security/dashboard").canEditDashboard(e))return yield M(e,a,!1)}function*M(e,r){let a,t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];yield F(e,r);try{a=yield v({path:`/ithemes-security/v1/dashboards/${e}/layout`,method:"PUT",data:r})}catch(e){return!1}return t&&(yield L(e,a)),a}function*J(e){yield $(e);try{yield v({path:`/ithemes-security/v1/dashboards/${e}`,method:"DELETE"})}catch(r){return yield G(e,r),yield m("error",(0,T.sprintf)((0,T.__)("Error when deleting dashboard: %s","it-l10n-ithemes-security-pro"),r.message)),r}return yield z(e),!0}const K="RECEIVE_DASHBOARD_QUERY",X="RECEIVE_DASHBOARD",ee="RECEIVE_DASHBOARD_LAYOUT",re="SAVING_DASHBOARD_LAYOUT",ae="START_ADD_DASHBOARD",te="FINISH_ADD_DASHBOARD",de="FAILED_ADD_DASHBOARD",se="START_SAVE_DASHBOARD",ie="FINISH_SAVE_DASHBOARD",ne="FAILED_SAVE_DASHBOARD",oe="START_DELETE_DASHBOARD",ce="FINISH_DELETE_DASHBOARD",ue="FAILED_DELETE_DASHBOARD",le="RECEIVE_DASHBOARD_COLLECTION_HEADERS",he={byId:{},queries:{},layouts:{},savingLayouts:{},adding:[],saving:[],deleting:[],collectionHeaders:{}};var be=a(28306),De=a(38085);function ye(e){for(var r=arguments.length,a=new Array(r>1?r-1:0),t=1;t<r;t++)a[t-1]=arguments[t];return(0,p.select)("core/data").isResolving("ithemes-security/dashboard",e,a)}function Ae(e){for(var r=arguments.length,a=new Array(r>1?r-1:0),t=1;t<r;t++)a[t-1]=arguments[t];return(0,p.select)("core/data").hasFinishedResolution("ithemes-security/dashboard",e,a)}function fe(e){return ge(e,"available")}const ge=(0,be.Z)(((e,r)=>(0,R.filter)((0,R.map)(e.dashboard.queries[r],(r=>e.dashboard.byId[r])),R.isObject)),((e,r)=>[e.dashboard.queries[r],e.dashboard.byId]));function _e(e,r){return e.dashboard.byId[r]}function Re(e,r){return e.dashboard.byId[r]}function Ee(e,r){return function(e,r,a){return(0,R.get)(e,["dashboard","byId",r,"_links","self",0,"targetHints","allow"],[])}(e,r).includes("PUT")}function pe(e){return e.dashboard.collectionHeaders.allow&&e.dashboard.collectionHeaders.allow.split(", ").includes("POST")}const Ce=(0,be.Z)(((e,r)=>(0,R.filter)((0,R.get)(e,["dashboard","byId",r,"_links","create-form"],[]),(e=>(0,R.get)(e,["targetHints","allow"],[]).includes("POST"))).map((e=>({...e,aboutLink:e.targetHints.link.map(De.parse).filter((e=>!!e.about)).map((e=>e.about))[0]})))),((e,r)=>[e.dashboard.byId[r]]));function Se(e,r,a){const t=(0,p.select)("ithemes-security/dashboard").getAvailableCardBySelf(a);return!(!t||!t.max)&&(0,p.select)("ithemes-security/dashboard").getDashboardCardsByType(r,a).length>=t.max}function Ie(){return ye("getAvailableDashboards")}function ve(e,r){return ye("getDashboardLayout",r)}function me(e,r){return Ae("getDashboardLayout",r)}function Oe(){return Ae("canCreateDashboards")}function He(e,r){return e.dashboard.savingLayouts[r]}function Te(e,r){return e.dashboard.layouts[r]}const we=(0,be.Z)(((e,r)=>(0,w.BP)(r,(0,R.get)((0,p.select)("ithemes-security/dashboard").getDashboardLayout(r),"cards",[]),(0,p.select)("ithemes-security/dashboard").getDashboardCards(r)||[])),((e,r)=>[e.dashboard.layouts[r],e.availableCards,e.cards.byDashboard[r]]));function Be(e,r){return e.dashboard.adding.includes(r)}function xe(e,r){return e.dashboard.saving.includes(r)}function Le(e,r){return e.dashboard.deleting.includes(r)}function*Fe(){const e=yield v({path:(0,H.addQueryArgs)("/ithemes-security/v1/dashboards",{_embed:1})});yield B("available",e)}const Ve={*fulfill(){const e=yield v({path:"/ithemes-security/v1/dashboards",method:"HEAD",parse:!1});yield U((0,I.N4)(e.headers))},isFulfilled:e=>!!e.dashboard.collectionHeaders.allow};function*Ne(){yield p.controls.resolveSelect("ithemes-security/dashboard","getAvailableDashboards")}function*Pe(e){const r=yield v({path:(0,H.addQueryArgs)(`/ithemes-security/v1/dashboards/${e}`,{_embed:1,context:"edit"})});yield x(r)}function*Ue(e){const r=yield v({path:`/ithemes-security/v1/dashboards/${e}/layout`});yield L(e,r)}function qe(e){return{type:ke,cards:e}}const ke="RECEIVE_AVAILABLE_CARDS";function Qe(e,r){return{type:Ar,dashboardId:e,cards:r}}function $e(e,r){return{type:fr,dashboardId:e,card:r}}function ze(e,r){return{type:gr,cardId:e,queryArgs:r}}function Ge(e,r,a){return{type:_r,cardId:e,data:r,links:a}}function je(e,r){return{type:Rr,dashboardId:e,cardId:r}}function Ye(e,r){return{type:Er,dashboardId:e,cardId:r}}function We(e,r,a){return{type:pr,collectionEP:e,card:r,context:a}}function Ze(e,r,a){return{type:Cr,collectionEP:e,card:r,context:a}}function Me(e,r,a,t){return{type:Sr,collectionEP:e,card:r,context:a,error:t}}function Je(e,r,a){return{type:Ir,cardId:e,href:r,data:a}}function Ke(e,r,a,t){return{type:vr,cardId:e,href:r,data:a,response:t}}function Xe(e,r,a,t){return{type:mr,cardId:e,href:r,data:a,error:t}}function er(e){return{type:Or,dashboardId:e}}function rr(e){return{type:Hr,dashboardId:e}}function ar(e,r){return{type:Tr,dashboardId:e,error:r}}function tr(e){return{type:wr,cardId:e}}function dr(e){return{type:Br,cardId:e}}function sr(e,r){return{type:xr,cardId:e,error:r}}function ir(e){return{type:Lr,cardId:e}}function nr(e){return{type:Fr,cardId:e}}function or(e,r){return{type:Vr,cardId:e,error:r}}function*cr(e,r,a){let t;yield We(e,r,a);try{t=yield v({url:(0,H.addQueryArgs)(e,{_embed:1}),method:"POST",data:r})}catch(t){return yield Me(e,r,a,t),void(yield m("error",(0,T.sprintf)((0,T.__)("Error when adding card to dashboard: %s","it-l10n-ithemes-security-pro"),t.message)))}yield Ze(e,r,a),yield $e(t.dashboard,t)}function*ur(e,r){const a=r.id;let t;try{t=yield v({path:`/ithemes-security/v1/dashboards/${e}/cards/${r.card}${a?"/"+a:""}`,method:a?"PUT":"POST",data:r})}catch(e){return yield m("error",(0,T.sprintf)((0,T.__)("Error when saving dashboard card: %s","it-l10n-ithemes-security-pro"),e.message)),e}return yield $e(e,t),t}function*lr(e,r){let a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];yield Ye(e,r.id),a&&(yield je(e,r.id));try{yield v({path:`/ithemes-security/v1/dashboards/${e}/cards/${r.card}/${r.id}`,method:"DELETE",parse:!1})}catch(t){return a&&(yield $e(e,r)),void(yield m("error",(0,T.sprintf)((0,T.__)("Error when removing card from dashboard: %s","it-l10n-ithemes-security-pro"),t.message)))}a||(yield je(e,r.id))}function*hr(e){yield er(e);const r=(0,p.select)("ithemes-security/dashboard"),a=r.getDashboardCards(e),t={_fields:["id","data","_links"],cards:{}};for(const e of a)(0,R.set)(t,["cards",e.card,e.id],r.getDashboardCardQueryArgs(e.id));let d;try{d=yield v({path:(0,H.addQueryArgs)(`/ithemes-security/v1/dashboards/${e}/cards`,t)})}catch(r){return yield ar(e,r),yield m("warning",(0,T.sprintf)((0,T.__)("Refreshing dashboard data failed: %s","it-l10n-ithemes-security-pro"),r.message),{autoDismiss:!0}),r}const s={};for(const e of d)s[e.id]=e.data,yield Ge(e.id,e.data,e._links);return yield rr(e),s}function*br(e){const r=(0,p.select)("ithemes-security/dashboard").getDashboardCard(e);if(!r)throw new Error("No card loaded with that id.");yield tr(e);const a=yield v({path:(0,H.addQueryArgs)(`/ithemes-security/v1/dashboards/${r.dashboard}/cards/${r.card}/${e}`,{...(0,p.select)("ithemes-security/dashboard").getDashboardCardQueryArgs(e),_fields:["data","_links"]})});return yield Ge(e,a.data,a._links),yield dr(e),a.data}function*Dr(e,r){const a=(0,p.select)("ithemes-security/dashboard").getDashboardCard(e);if(!a)throw new Error("No card loaded with that id.");yield ir(e);const t=yield v({path:(0,H.addQueryArgs)(`/ithemes-security/v1/dashboards/${a.dashboard}/cards/${a.card}/${e}`,{...r,_fields:["data","_links"]})});return yield Ge(e,t.data,t._links),yield ze(e,r),yield nr(e),t.data}function*yr(e,r,a){let t;yield Je(e,r,a);try{t=yield v({url:r,method:"POST",data:a})}catch(t){return yield Xe(e,r,a,t),yield m("error",(0,T.sprintf)((0,T.__)("Error when performing card action: %s","it-l10n-ithemes-security-pro"),t.message)),t}return yield Ke(e,r,a,t),yield br(e),t}const Ar="RECEIVE_DASHBOARD_CARDS",fr="RECEIVE_DASHBOARD_CARD",gr="RECEIVE_DASHBOARD_CARD_QUERY_ARGS",_r="RECEIVE_DASHBOARD_CARD_DATA",Rr="REMOVE_DASHBOARD_CARD",Er="START_REMOVE_DASHBOARD_CARD",pr="START_ADD_DASHBOARD_CARD",Cr="FINISH_ADD_DASHBOARD_CARD",Sr="FAILED_ADD_DASHBOARD_CARD",Ir="START_DASHBOARD_CARD_RPC",vr="FINISH_DASHBOARD_CARD_RPC",mr="FAILED_DASHBOARD_CARD_RPC",Or="START_REFRESH_DASHBOARD_CARDS",Hr="FINISH_REFRESH_DASHBOARD_CARDS",Tr="FAILED_REFRESH_DASHBOARD_CARDS",wr="START_REFRESH_DASHBOARD_CARD",Br="FINISH_REFRESH_DASHBOARD_CARD",xr="FAILED_REFRESH_DASHBOARD_CARD",Lr="START_QUERY_DASHBOARD_CARD",Fr="FINISH_QUERY_DASHBOARD_CARD",Vr="FAILED_QUERY_DASHBOARD_CARD",Nr=(0,be.Z)((e=>Object.values(e.availableCards)),(e=>[e.availableCards]));function Pr(e,r){return e.availableCards[r]}const Ur=(0,be.Z)(((e,r)=>(0,R.find)(e.availableCards,(e=>(0,R.get)(e,["_links","self",0,"href"])===r))),(e=>[e.availableCards]));function*qr(){try{const e=yield v({path:"/ithemes-security/v1/dashboard-available-cards"});yield qe(e)}catch(e){yield qe([])}}function*kr(){yield(0,p.select)("ithemes-security/dashboard").getAvailableCards()}function*Qr(){yield(0,p.select)("ithemes-security/dashboard").getAvailableCards()}const $r={byId:{},byDashboard:{},queryArgs:{},deleting:[],adding:[],rpcs:{},refreshingDashboards:[],querying:[]},zr=(0,be.Z)(((e,r)=>(0,R.map)(e.cards.byDashboard[r],(r=>e.cards.byId[r]))),((e,r)=>[e.cards.byDashboard[r],e.cards.byId]));function Gr(e,r){return e.cards.byId[r]}function jr(e,r){return(0,R.get)(e,["cards","byId",r,"settings"])}function Yr(e,r){return e.cards.queryArgs[r]}function Wr(e,r){const a=(0,p.select)("ithemes-security/dashboard").getDashboardCard(r);if(a)return(0,p.select)("ithemes-security/dashboard").getAvailableCard(a.card)}function Zr(e,r,a){const t=(0,p.select)("ithemes-security/dashboard").getDashboardCards(r),d=[];for(const e of t)(0,R.get)(e,["_links","about",0,"href"])===a&&d.push(e);return d}function Mr(e,r,a){return!(!(0,p.select)("ithemes-security/dashboard").canEditDashboard(r)||!a)}function Jr(e,r){return ye("getDashboardCards",r)}function Kr(e,r){return e.cards.refreshingDashboards.includes(r)}function Xr(e,r){return Ae("getDashboardCards",r)}function ea(e,r){return e.cards.deleting.includes(r)}function ra(e,r){return e.cards.adding.includes(r)}function aa(e,r,a){return e.cards.rpcs[r]&&e.cards.rpcs[r].includes(a)}const ta=[];function da(e,r){return e.cards.rpcs[r]||ta}function sa(e,r){return e.cards.querying.includes(r)}function*ia(e){const r=yield v({path:`/ithemes-security/v1/dashboards/${e}/cards?_embed=1`});yield Qe(e,r)}function*na(e){const r=(0,p.select)("ithemes-security/dashboard").getDashboardCard(e);r&&!(0,p.select)("ithemes-security/dashboard").getAvailableCard(r.card)&&(0,p.select)("ithemes-security/dashboard").getAvailableCards()}function oa(e){return{type:_a,page:"view-dashboard",attr:{id:e}}}function ca(){return{type:_a,page:"create-dashboard"}}function ua(){return{type:_a,page:"help"}}function la(){return{type:Ra}}function ha(){return{type:Ca}}function ba(){return{type:Sa}}function Da(e){return{type:Ea,users:e}}function ya(e){return{type:pa,user:e}}function Aa(e,r){return{type:Ia,stats:e,query:r}}function fa(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return{type:va,isUsing:e}}function ga(e,r){return{type:ma,slug:e,settings:r}}const _a="NAVIGATE",Ra="NAVIGATE_BACK",Ea="RECEIVE_SUGGESTED_SHARE_USERS",pa="RECEIVE_USER",Ca="OPEN_EDIT_CARDS",Sa="CLOSE_EDIT_CARDS",Ia="RECEIVE_STATIC_STATS",va="USING_TOUCH",ma="REGISTER_CARD",Oa={view:{page:"",attr:{}},previousView:null,editingCards:!1,suggestedShareUsers:[],users:{byId:{}},staticStats:{data:{},query:{}},usingTouch:!1,cards:{}};function Ha(e){return e.app.view.page}function Ta(e){return e.app.view.attr}function wa(e){return"view-dashboard"===e.app.view.page&&e.app.view.attr.id}function Ba(e){return e.app.suggestedShareUsers}function xa(e,r){return e.app.users.byId[r]}function La(e){return e.app.editingCards}function Fa(e){return e.app.staticStats.data}function Va(e){return e.app.usingTouch}function Na(e,r){return e.app.cards[r]}var Pa=a(81834),Ua=a.n(Pa);function*qa(){const e=yield v({path:(0,H.addQueryArgs)("/wp/v2/users",{roles:"administrator"})});yield Da(e)}function*ka(e){const r=yield v({path:`/wp/v2/users/${e}`});yield ya(r)}const Qa={*fulfill(e){const r="/ithemes-security/v1/dashboard-static",a=yield v({path:(0,R.isEmpty)(e)?r:(0,H.addQueryArgs)(r,e)});yield Aa(a,e)},isFulfilled:(e,r)=>Ua()(e.app.staticStats.query,r)};function $a(e){return{type:Ga,dashboardId:e}}function*za(e){const r=yield v({path:"/wp/v2/users/me",method:"PUT",data:{meta:{_itsec_primary_dashboard:e}}});yield $a(r.meta._itsec_primary_dashboard)}const Ga="RECEIVE_PRIMARY_DASHBOARD",ja={primaryDashboard:void 0};function Ya(e){return e.user.primaryDashboard}function*Wa(){const e=yield v({path:(0,H.addQueryArgs)("/wp/v2/users/me",{context:"edit"})});yield $a(e.meta._itsec_primary_dashboard)}const Za={reducer:(0,p.combineReducers)({dashboard:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:he,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case K:return{...e,byId:{...e.byId,...(0,R.keyBy)(r.dashboards,"id")},queries:{...e.queries,[r.queryId]:(0,R.map)(r.dashboards,(e=>e.id))}};case X:return{...e,byId:{...e.byId,[r.dashboard.id]:r.dashboard},queries:{...e.queries,available:e.queries.available.includes(r.dashboard.id)?e.queries.available:[...e.queries.available,r.dashboard.id]}};case ee:return{...e,layouts:{...e.layouts,[r.dashboardId]:r.layout},savingLayouts:{...e.savingLayouts,[r.dashboardId]:!1}};case re:return{...e,savingLayouts:{...e.savingLayouts,[r.dashboardId]:!0}};case ae:return r.context?{...e,adding:[...e.adding,r.context]}:e;case te:case de:return{...e,adding:e.adding.filter((e=>e!==r.context))};case se:return{...e,saving:[...e.saving,r.dashboardId]};case ie:case ne:return{...e,saving:e.saving.filter((e=>e!==r.dashboardId))};case le:return{...e,collectionHeaders:r.headers};case oe:return{...e,deleting:[...e.deleting,r.dashboardId]};case ce:return{...e,deleting:e.deleting.filter((e=>e!==r.dashboardId)),byId:(0,R.omit)(e.byId,[r.dashboardId])};case ue:return{...e,deleting:e.deleting.filter((e=>e!==r.dashboardId))};default:return e}},availableCards:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;switch(r.type){case ke:return{...e,...(0,R.keyBy)(r.cards,"slug")};case Ar:const a={};for(const t of r.cards)if((0,R.has)(t,["_embedded","about",0])){const r=t._embedded.about[0].slug;e[r]||(a[r]=t._embedded.about[0])}return(0,R.isEmpty)(a)?e:{...e,...a};default:return e}},cards:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$r,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case Ar:return{...e,byId:{...e.byId,...(0,R.keyBy)(r.cards,"id")},byDashboard:{...e.byDashboard,[r.dashboardId]:(0,R.map)(r.cards,(e=>e.id))}};case fr:return{...e,byId:{...e.byId,[r.card.id]:r.card},byDashboard:{...e.byDashboard,[r.dashboardId]:e.byDashboard[r.dashboardId]&&e.byDashboard[r.dashboardId].includes(r.card.id)?e.byDashboard[r.dashboardId]:[...(0,R.get)(e,["byDashboard",r.dashboardId],[]),r.card.id]}};case gr:return{...e,queryArgs:{...e.queryArgs,[r.cardId]:r.queryArgs}};case _r:return{...e,byId:{...e.byId,[r.cardId]:{...e.byId[r.cardId],data:r.data,_links:r.links}}};case Er:return{...e,deleting:[...e.deleting,r.cardId]};case Rr:return{...e,byId:(0,R.omit)(e.byId,r.cardId),byDashboard:{...e.byDashboard,[r.dashboardId]:(0,R.filter)(e.byDashboard[r.dashboardId],(e=>e!==r.cardId))},deleting:(0,R.filter)(e.deleting,(e=>e!==r.cardId))};case pr:return r.context?{...e,adding:[...e.adding,r.context]}:e;case Cr:case Sr:return{...e,adding:e.adding.filter((e=>e!==r.context))};case Ir:return{...e,rpcs:{...e.rpcs,[r.cardId]:[...e.rpcs[r.cardId]||[],r.href]}};case vr:case mr:return{...e,rpcs:{...e.rpcs,[r.cardId]:(e.rpcs[r.cardId]||[]).filter((e=>e!==r.href))}};case Or:return{...e,refreshingDashboards:[...e.refreshingDashboards,r.dashboardId]};case Hr:case Tr:return{...e,refreshingDashboards:e.refreshingDashboards.filter((e=>e!==r.dashboardId))};case Lr:return{...e,querying:[...e.querying,r.cardId]};case Fr:return{...e,querying:e.querying.filter((e=>e!==r.cardId))};default:return e}},app:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oa,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case _a:return{...e,view:{page:r.page,attr:r.attr||{}},previousView:e.view};case Ra:return{...e,view:e.previousView||Oa.view,previousView:null};case Ea:return{...e,suggestedShareUsers:r.users,users:{...e.users,byId:{...e.users.byId,...(0,R.keyBy)(r.users,"id")}}};case pa:return{...e,users:{...e.users,byId:{...e.users.byId,[r.user.id]:r.user}}};case te:return["create-dashboard-scratch","create-dashboard-default"].includes(r.context)?{...e,editingCards:!0,view:{page:"view-dashboard",attr:{id:r.created.id}}}:e;case Ca:return{...e,editingCards:!0};case Sa:return{...e,editingCards:!1};case Ia:return{...e,staticStats:{data:r.stats,query:r.query}};case va:return{...e,usingTouch:r.isUsing};case ma:return{...e,cards:{...e.cards,[r.slug]:r.settings}};default:return e}},user:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ja,r=arguments.length>1?arguments[1]:void 0;return r.type===Ga?{...e,primaryDashboard:r.dashboardId}:e}}),controls:{...O},actions:{...t,...i,...n,...h,...y},selectors:{...d,...o,...u,...b,...A},resolvers:{...s,...c,...l,...D,...f}};function Ma(e){let{type:r="secondary",...a}=e;return(0,_.createElement)(E.Fill,(0,g.Z)({name:`AdminBar${(0,R.capitalize)(r)}`},a))}function Ja(e){let{type:r="secondary",...a}=e;return(0,_.createElement)(E.Slot,(0,g.Z)({name:`AdminBar${(0,R.capitalize)(r)}`},a))}function Ka(e){return(0,_.createElement)(E.Fill,(0,g.Z)({name:"BelowToolbar"},e))}function Xa(e){return(0,_.createElement)(E.Slot,(0,g.Z)({name:"BelowToolbar"},e))}function et(e){return(0,_.createElement)(E.Fill,(0,g.Z)({name:"EditCards"},e))}function rt(e){return(0,_.createElement)(E.Slot,(0,g.Z)({name:"EditCards"},e))}(0,p.registerStore)("ithemes-security/dashboard",Za),a.p=window.itsecWebpackPublicPath},65760:(e,r,a)=>{"use strict";a.d(r,{Ai:()=>g,BP:()=>_,Bi:()=>R,E$:()=>O,E_:()=>l,GP:()=>v,IF:()=>C,Mf:()=>S,_U:()=>m,bK:()=>b,hN:()=>D,j$:()=>A,lh:()=>I,pD:()=>E,qt:()=>h,sv:()=>y});var t=a(92819),d=a(59588),s=a.n(d),i=a(48015),n=a(95122),o=a(54761),c=a(6293),u=a(31511);const l=(0,c.createContext)({canManage:!1,installType:""});function h(){return(0,c.useContext)(l)}function b(){const{canCreate:e,canEdit:r}=(0,i.useSelect)((e=>({canCreate:e("ithemes-security/dashboard").canCreateDashboards(),canEdit:e("ithemes-security/dashboard").canEditDashboard(e("ithemes-security/dashboard").getViewingDashboardId())})),[]);return e||r}const D=Object.freeze(["huge","wide","large","medium","mobile"]),y=Object.freeze({huge:8,wide:6,large:4,medium:2,mobile:1}),A=Object.freeze(D.reduce(((e,r)=>({...e,[r]:250*y[r]+20*(y[r]-1)})),{})),f=["minW","minH","maxW","maxH"];function g(e,r){const a=(0,i.select)("ithemes-security/dashboard"),t={};for(const e in r){if(!r.hasOwnProperty(e))continue;const d=r[e];for(const r of d){const d=a.getDashboardCard(parseInt(r.i));d&&(t[d.id]?(t[d.id].size[e]={w:r.w,h:r.h},t[d.id].position[e]={x:r.x&&r.x!==1/0?r.x:0,y:r.y&&r.y!==1/0?r.y:0}):t[d.id]={id:d.id,card:d.card,size:{[e]:{w:r.w,h:r.h}},position:{[e]:{x:r.x&&r.x!==1/0?r.x:0,y:r.y&&r.y!==1/0?r.y:0}}})}}return{cards:Object.values(t)}}function _(e,r,a){let{cards:d={}}=a;const s=(0,t.zipObject)(Object.keys(A),(0,t.times)(Object.keys(A).length,(()=>[]))),n={};for(const r of d){n[r.id]=!0;const a=(0,i.select)("ithemes-security/dashboard").getAvailableCard(r.card);if(a||"unknown"===r.card)for(const t of D)s[t].push(R(e,r,a,t,s[t]))}if(Object.keys(n).length<r.length)for(const a of r)if(!n[a.id]){const r=(0,i.select)("ithemes-security/dashboard").getAvailableCard(a.card);if(r)for(const t of D)s[t].push(R(e,a,r,t,s[t]))}return s}function R(e,r,a,d,s){if(!A[d])return;const n={i:r.id.toString(),x:(0,t.get)(r,["position",d,"x"]),y:(0,t.get)(r,["position",d,"y"]),w:(0,t.get)(r,["size",d,"w"],(0,t.get)(a,["size","defaultW"],1)),h:(0,t.get)(r,["size",d,"h"],(0,t.get)(a,["size","defaultH"],2))};if(a&&a.size)for(const e of f)a.size.hasOwnProperty(e)&&(n[e]=a.size[e]);if(n.minW&&n.minW>n.w&&(n.w=n.minW),n.minH&&n.minH>n.h&&(n.h=n.minH),n.maxW&&n.w>n.maxW&&(n.w=n.maxW),n.maxH&&n.h>n.maxH&&(n.h=n.maxH),s&&void 0===n.x&&void 0===n.x){const e=E(y[d],s,{w:n.w,h:n.h});e&&(n.x=e.x,n.y=e.y)}return n.x=void 0===n.x||null===n.x?0:n.x,n.y=void 0===n.y||null===n.y?1/0:n.y,(0,i.select)("ithemes-security/dashboard").canEditDashboard(e)||(n.static=!0),"unknown"===r.card&&(n.isResizable=!1),n.minW===n.maxW&&n.minH===n.maxH&&(n.isResizable=!1),n}function E(e,r,a){const t=[];for(const a of r){const{x:r,y:d,w:s,h:i}=a;for(let a=0;a<i;a++){t[a]||(t[a]=new Array(e).fill(0));for(let i=0;i<s;i++)t[a+d]||(t[a+d]=new Array(e).fill(0)),t[a+d][i+r]=1}}const{w:d,h:s}=a;for(let r=0;r<t.length;r++)e:for(let a=0;a<e;a++)if(!t[r]||1!==t[r][a]){for(let i=0;i<s;i++)for(let s=0;s<d;s++)if(r+i>t.length||a+s>=e||t[r+i]&&1===t[r+i][a+s])continue e;return{x:a,y:r}}return{x:0,y:t.length}}function p(e,r){return e.x===r.x&&e.y===r.y&&e.w===r.w&&e.h===r.h}const C=s()((function(e,r){if(e===r)return!0;if(Object.keys(e).length!==Object.keys(r).length)return!1;const a=new Map;for(let t=0;t<D.length;t++){const d=D[t];if(e[d]||r[d]){if(!e[d]&&r[d]||e[d]&&!r[d])return!1;if(e[d].length!==r[d].length)return!1;for(let r=0;r<e[d].length;r++)a.set(e[d][r].i,e[d][r]);for(let e=0;e<r[d].length;e++){const t=a.get(r[d][e].i);if(!t)return!1;if(!p(t,r[d][e]))return!1;a.delete(t.i)}if(a.size>0)return!1}}return!0})),S=s()((function(e,r,a){const d=(0,t.keyBy)(r[a],"i"),s=[...e];return s.sort((function(e,r){const a=e.id.toString(),t=r.id.toString();if(!d[a]&&!d[t])return 0;if(d[a]&&!d[t])return 1;if(!d[a]&&d[t])return-1;const s=d[a].y,i=d[t].y,n=d[a].x,o=d[t].x;return s>i?1:s<i?-1:n>o?1:n<o?-1:0})),s})),I=s()((function(e,r){const a=(0,t.keyBy)(r.cards,"id"),d=[...e];return d.sort((function(e,r){const t=e.id,d=r.id;if(!a[t]&&!a[d])return 0;if(a[t]&&!a[d])return 1;if(!a[t]&&a[d])return-1;const s=a[t].position.mobile.y,i=a[d].position.mobile.y,n=a[t].position.mobile.x,o=a[d].position.mobile.x;return s>i?1:s<i?-1:n>o?1:n<o?-1:0})),d}));function v(e,r){if(!r)return(0,n.__)("Unknown Card","it-l10n-ithemes-security-pro");let a=r.label;return a=(0,o.applyFilters)(`ithemes-security.dashboard.getCardTitle.${r.slug}`,a,e),(0,o.applyFilters)("ithemes-security.dashboard.getCardTitle",a,e,r)}function m(e,r,a,t){Object.entries(a).forEach((r=>{let[a,t]=r;return e[a]!==t&&console.log(`Prop '${a}' changed`)})),Object.entries(t).forEach((e=>{let[a,t]=e;return r[a]!==t&&console.log(`State '${a}' changed`)}))}function O(e){return(0,t.get)(e,["avatar_urls",96],u.sE)}},59588:e=>{e.exports=function(e,r){var a,t,d=0;function s(){var s,i,n=a,o=arguments.length;e:for(;n;){if(n.args.length===arguments.length){for(i=0;i<o;i++)if(n.args[i]!==arguments[i]){n=n.next;continue e}return n!==a&&(n===t&&(t=n.prev),n.prev.next=n.next,n.next&&(n.next.prev=n.prev),n.next=a,n.prev=null,a.prev=n,a=n),n.val}n=n.next}for(s=new Array(o),i=0;i<o;i++)s[i]=arguments[i];return n={args:s,val:e.apply(null,s)},a?(a.prev=n,n.next=a):t=n,d===r.maxSize?(t=t.prev).next=null:d++,a=n,n.val}return r=r||{},s.clear=function(){a=null,t=null,d=0},s}},87514:e=>{e.exports=function(){return this.wp.apiFetch}()},64893:e=>{e.exports=function(){return this.wp.components}()},48015:e=>{e.exports=function(){return this.wp.data}()},6293:e=>{e.exports=function(){return this.wp.element}()},54761:e=>{e.exports=function(){return this.wp.hooks}()},95122:e=>{e.exports=function(){return this.wp.i18n}()},81834:e=>{e.exports=function(){return this.wp.isShallowEqual}()},73470:e=>{e.exports=function(){return this.wp.url}()},92819:e=>{"use strict";e.exports=window.lodash},87462:(e,r,a)=>{"use strict";function t(){return t=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])}return e},t.apply(this,arguments)}a.d(r,{Z:()=>t})}},e=>{e.O(0,[1469],(()=>(13722,e(e.s=13722))));var r=e.O();((window.itsec=window.itsec||{}).dashboard=window.itsec.dashboard||{}).api=r}]);